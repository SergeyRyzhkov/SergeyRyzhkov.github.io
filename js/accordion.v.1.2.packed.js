var Accordion=function(g){function f(a,c){var d=a.dd.scrollHeight,i;if(!c.cfg.onBeforeCollapse(a))return!1;i=g.setInterval(function(){if(0>=(d-=c.cfg.speed))return a.dd.style.height="0px",g.clearInterval(i),c.cfg.onAfterCollapse(a),!0;a.dd.style.height=d+"px";return!0},5);a.dt.removeAttribute("id");a.state=0;return!0}function j(a,c){var d=0,i=a.dd.scrollHeight,f;if(!c.cfg.onBeforeOpen(a))return!1;f=g.setInterval(function(){if((d+=c.cfg.speed)>=i)return a.dd.style.height=i+"px",g.clearInterval(f),c.cfg.onAfterOpen(a),!0;a.dd.style.height=d+"px";return!0},5);a.dt.id=c.prefix+"-current";a.state=1;return!0}return function(a,c){return{cfg:{openIdx:0,speed:5,event:"click",onBeforeOpen:function(){return!0},onAfterOpen:function(){return!0},onBeforeCollapse:function(){return!0},onAfterCollapse:function(){return!0}},option:function(d){for(var a in d)this.cfg.hasOwnProperty(a)&&(this.cfg[a]="undefined"===typeof d[a]?this.cfg[a]:d[a]);return!0},panes:[],opened:null,prefix:null,init:function(a,c){function g(a){b.panes.push(a);a.dt["on"+b.cfg.event]=function(){if(b.opened!==a){if(b.opened&&1===b.opened.state&&!f(b.opened,b))return!1;b.opened=a;j(b.opened,b);return!0}if(0===a.state)return!j(b.opened,b)?!1:!0;f(b.opened,b);return!0};return!0}var k=a.children,l=k.length,b=this,h,e;b.option(c);this.prefix=a.id;for(e=0;e<l;e+=2)h={dt:k[e],dd:k[e+1],num:e/2+1,state:e===2*(b.cfg.openIdx-1)?1:0},1===h.state?(b.opened=h,b.opened.dt.id=this.prefix+"-current"):h.dd.style.height="0px",h.dd.style.overflow="hidden",g(h);return this},close:function(){if(!this.opened||0===this.opened.state)return!1;f(this.opened,this);return!0},open:function(a){if(!this.panes[a])return!1;if(this.opened&&1===this.opened.state&&this.panes[a].num===this.opened.num)return!0;if(this.opened&&1===this.opened.state&&!f(this.opened,this)||!j(this.panes[a],this))return!1;this.opened=this.panes[a];return!0}}.init(a,c)}}(this);