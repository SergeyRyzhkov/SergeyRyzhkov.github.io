<script>
$.views.helpers({
	layerTreeMapSidebarAfterRendering: function() {
		if ($('#mapexpress-sidebar-tabSet').hasClass('scroll_tabs_container')) {
			$('#mapexpress-sidebar-tabSet').destroy();
		}
		$('#mapexpress-sidebar-tabSet').scrollTabs();

		$("#mapexpress-sidebar-tabSet li").on('click', function() {
			$("#mapexpress-map-toc").find('div.tabs__content').removeClass('active').eq($(this).index()).addClass('active');
		});
		
		$("#map-sidebar-close-btn").on('click', function() {
			$("#sidebar-mapSidebarTemplateId").remove();
		});
		
		new MapExpress.Controls.TreeLayerControl(MapManager).render();
		new MapExpress.Controls.LayerOrderControl(MapManager).render();
		new MapExpress.Controls.LegendControl(MapManager).render();
	}
 }
);
</script>

<script id="mapSidebarTemplateId" type="text/x-jsrender">
		<div class="mapexpress-control-headerbar mapexpress-sidebar-header">
			<div class="mapexpress-control-titlebar">
				<div class="mapexpress-control-title mapexpress-sidebar-title">Управление картой</div>
			</div>
			<div class="mapexpress-control-toolbar">
				<div class="mapexpress-control-toolbar-btn">&#215</div>
			</div>
		</div>
		
		<div id="mapexpress-map-toc" class = "mapexpress-toc-wrapper">
				<ul id = 'mapexpress-sidebar-tabSet' class="tabSet scroll_tabs_theme_light">
					<li class="tab_selected">Содержание</li>
					<li>Управление слоями</li>
					<li>Легенда</li>
				</ul>
				<div  class="mapexpress-toc-content">
					<div id="treelayercontrol" class="tabs__content active" style="overflow-y:auto; flex:1 1 0%;"/>
					<div id="layer-order-control" class="tabs__content" style="flex:1 1 0%;"/>
					<div id="legend-control" class="tabs__content" style="flex:1 1 0%;"/>
				</div>
		</div>
</script>

   