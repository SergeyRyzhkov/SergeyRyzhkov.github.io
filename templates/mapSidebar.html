<script id="mapSidebarTemplateId" type="text/x-jsrender">
            <div  class="navbar-default sidebar" role="navigation" style="margin-top:0px; width: 270px;">
                <div class="sidebar-nav navbar-collapse" >
                    <h4 style="text-align: center">{{:displayName}}</h4>
					<ul class="nav" id="side-menu">
                        <li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> <b>Базовые карты </b><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
								{{for layers}}
									{{if type === 'base'}}								
										<li>
											<div style="padding: 5px" id="{{:id}}">
												{{if visible === false}}
													<a href="#" class="text-muted" onclick ="toogleLayerVisible($(this));">{{:displayName}}</a>
												{{/if}}
												{{if visible === true}}
													<a href="#" onclick ="toogleLayerVisible($(this));">{{:displayName}}</a>
												{{/if}}
												
												<a href="#" data-toggle="popover" data-trigger="click" title="{{:displayName}}" data-contentwrapper="#layerconfig{{:id}}"><i class='fa fa-cog fa-fw pull-right'/></a>
											</div>
										</li>
									{{/if}}
                               {{/for}}
                            </ul>
                        </li>
						
						<li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> <b>Слои карты</b><span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
								{{for layers}}
									{{if type === 'overlay'}}								
										<li>
											<div style="padding: 5px" id="{{:id}}">
												{{if visible === false}}
													<a href="#" class="text-muted" onclick ="toogleLayerVisible($(this));">{{:displayName}}</a>
												{{/if}}
												{{if visible === true}}
													<a href="#" onclick ="toogleLayerVisible($(this));">{{:displayName}}</a>
												{{/if}}
												
												<a href="#" data-toggle="popover" data-trigger="click" title="{{:displayName}}" data-contentwrapper="#layerconfig{{:id}}"><i class='fa fa-cog fa-fw pull-right'/></a>
											</div>
										
											<div id="layerconfig{{:id}}" style="display: none;">
											  
												<label for="ex{{:id}}">Прозрачность:</label>
												<input id="ex{{:id}}" type="text" data-slider-id='ex{{:id}}Slider' data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="100"/>
																				
												<label for="displayName">Наименование:</label>
												<input type="text" class="form-control" id="displayName"/>
													  
												<label for="description">Описание:</label>
												<input type="text" class="form-control" id="description"/>
												
												<br>
												<label >Видимость:</label>
												<input type="checkbox" name="visible{{:id}}" checked data-size="mini" data-on-text="Да" data-off-text="Нет"/>
												
												<br>
												<br>
												<label >Идентификация:</label>
												<input type="checkbox" name="identity{{:id}}" checked data-size="mini" data-on-text="Да" data-off-text="Нет"/>
											
										   </div>
										</li>
									{{/if}}
                               {{/for}}
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
			
			<script>
				$(document).ready(function(){
					
						$('[data-toggle="popover"]').popover({
							html:'true',
							content: function() {  
							return $($(this).data('contentwrapper')).html(); },
							trigger: 'click'
						});
						
						{{for layers}}
							{{if type === 'overlay'}}	
								$("#ex{{:id}}").slider();
								$("[name='visible{{:id}}']").bootstrapSwitch();
								$("[name='identity{{:id}}']").bootstrapSwitch();
							{{/if}}
                        {{/for}}
					
				});
				
				function toogleLayerVisible (element) {
					var layer = MapManager.toogleLayerVisible(element.closest('div').attr('id'));
					
					//if (layer.visible){
						element.toggleClass ("text-muted");
					//}
				};
				
			</script>
		
</script>

   