BaltrosPkk={Controls:{},Service:{},Geo:{},Layers:{},Utils:{Promise:{}},Mapping:{},Tools:{},Styles:{},Search:{},Edit:{}},window.BaltrosPkk=BaltrosPkk,BaltrosPkk.Mapping.MapInitializer={initialize:function(e){MapExpress.Mapping.MapInitializerHelper.initializeFromURL(e,"map_model23456.json",function(){var e=window.MapManager,a=window.MapManager._map;MapExpress.Utils.CadastreUtils.replaceRosreestrIdentifyFunc(),a.addControl((t=window.MapManager,o=new MapExpress.Tools.MapToolbar(t,{position:"topleft"}),o.addCommand(new MapExpress.Tools.ShowLayerControlMapCommandExt(t,{closeOnLeave:!1})),o.addControlFromTemplate("templates/realtySearch.html","searchId"),o)),a.addControl(function(){var e=window.MapManager,a=new MapExpress.Tools.MapToolbar(e,{position:"topright",panelBodyId:"standart-toolbar-body",mapToolBarId:"standart-toolbar"});a.addCommand(new MapExpress.Tools.IdentifyMapCommand(e)),a.addCommand(new MapExpress.Tools.LineMeasureCommand(e)),a.addCommand(new MapExpress.Tools.SqrtMeasureCommand(e)),a.addCommand(new MapExpress.Tools.CoordinatesRunnerCommand(e)),a.addCommand(new MapExpress.Tools.MapExportCommand(e,{showProjList:!1})),a.addCommand(new MapExpress.Tools.SelectorBaseMapsCommand(e));var t=new MapExpress.Tools.ShowLegendCommand(e);return a.addCommand(t),t.activate(),a}()),a.addControl(function(){var e=new MapExpress.Controls.MapStatusbarControl(window.MapManager);e.addSection(new MapExpress.Controls.ZoomStandartStatusbarSection(window.MapManager)),e.addSection(new MapExpress.Controls.CoordinatesStandartStatusbarSection(window.MapManager)),e.addSection(new MapExpress.Controls.CurrentToolStatusbarSection(window.MapManager));var a=new MapExpress.Controls.AttibutionStandartStatusbarSection(window.MapManager);return a.options.attibution.push({href:"http://leafletjs.com",prefix:"Leaflet"}),a.options.attibution.push({href:"https://openstreetmap.org",prefix:"© OpenStreetMap"}),window.MapManager.mapStatusBar=e}()),L.control.zoom({position:"topleft"}).addTo(a),MapExpress.Tools.IdentifyMapCommand.maxHeightMinus=.35,MapExpress.Tools.IdentifyMapCommand.maxWidthMinus=.6,BaltrosPkk.Mapping.LegendManager.addRoadLegend(),BaltrosPkk.Mapping.LegendManager.initListenersForImageLegend(),e.refreshMap();var t,o}),MapExpress.Tools.ShowLayerControlMapCommandExt=MapExpress.Tools.ShowLayerControlMapCommand.extend({createContent:function(e){var a=MapExpress.Tools.ShowLayerControlMapCommand.prototype.createContent.call(this,e);MapExpress.Controls.MapControlUtils.setStyle(a,"float:left");var t=L.DomUtil.create("span","divider1",e);return MapExpress.Controls.MapControlUtils.setStyle(t,"float:left"),a}})}},BaltrosPkk.Mapping.LegendManager={addPkkParcelLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#ffffff" stroke-width="3" x="0" y="0" width="48" height="24" stroke-dasharray="none" stroke="#f28383" opacity="1" fill-opacity="1" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addPkkOksLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#ffbebe" stroke-width="3" x="0" y="0" width="48" height="24" stroke="#ffbebe"  opacity="1" fill-opacity="1" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addPkkZouitLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#92d17b" stroke-width="3" x="0" y="0" width="48" height="24" stroke="#92d17b"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addRoadLegend:function(){var e=window.MapManager.getMapModel().getLayerById("0edd6a13-a7ea-4992-9244-01dfcc96fb67");e&&MapExpress.Utils.legendUtils.addLegendItemToLayer(e.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/traffic_lights.png",imageDataFormat:"png"});var a=window.MapManager.getMapModel().getLayerById("f59439fa-34a4-4c17-9b69-1e0426643371");a&&MapExpress.Utils.legendUtils.addLegendItemToLayer(a.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/peshehod.png",imageDataFormat:"png"});var t=window.MapManager.getMapModel().getLayerById("13b3cdf1-b591-48bf-9b57-1717fc17997e");t&&MapExpress.Utils.legendUtils.addLegendItemToLayer(t.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/transport_stop.png",imageDataFormat:"png"});var o=window.MapManager.getMapModel().getLayerById("a740672b-5103-434a-8d12-f9ea317c3b5e");o&&MapExpress.Utils.legendUtils.addLegendItemToLayer(o.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/camera.jpg",imageDataFormat:"jpeg"});var n=window.MapManager.getMapModel().getLayerById("965f6298-a8de-411c-8fff-5b9abdb929e0");n&&MapExpress.Utils.legendUtils.addLegendItemToLayer(n.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><rect fill="#a2bcd6" stroke-width="1" x="0" y="0" width="48" height="48" stroke="#a2bcd6"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",minZoom:0,maxZoom:24});var d=window.MapManager.getMapModel().getLayerById("55a62cba-226a-4061-9287-76c1f58e5a20");d&&MapExpress.Utils.legendUtils.addLegendItemToLayer(d.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="14" x1="0" y1="24" x2="48" y2="24" stroke="#9c8e8b"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var s=window.MapManager.getMapModel().getLayerById("7cfd41b6-d2a7-472f-8b32-6e4bc547252a");s&&MapExpress.Utils.legendUtils.addLegendItemToLayer(s.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#4f061b"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var r=window.MapManager.getMapModel().getLayerById("a2961fd2-f998-4fed-8084-def2fe3f831c");r&&MapExpress.Utils.legendUtils.addLegendItemToLayer(r.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#da7ca1"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var i=window.MapManager.getMapModel().getLayerById("beff45cb-cae1-4870-85c2-2ee2f3407650");i&&MapExpress.Utils.legendUtils.addLegendItemToLayer(i.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#3498db"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var p=window.MapManager.getMapModel().getLayerById("09022ff7-cdf8-47ed-8ceb-ea8144dd167a");p&&MapExpress.Utils.legendUtils.addLegendItemToLayer(p.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><rect fill="#a2bcd6" stroke-width="1" x="0" y="0" width="48" height="48" stroke="#a2bcd6"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",minZoom:0,maxZoom:24});var l=window.MapManager.getMapModel().getLayerById("8c740b68-2961-4a34-b8b8-5681f761f7a2");l&&MapExpress.Utils.legendUtils.addLegendItemToLayer(l.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><rect fill="#49daed" stroke-width="1" x="0" y="0" width="48" height="48" stroke="#49daed"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",minZoom:0,maxZoom:24});var g=window.MapManager.getMapModel().getLayerById("5965f574-3849-4bf5-b38e-fde4c938a75e");g&&MapExpress.Utils.legendUtils.addLegendItemToLayer(g.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#1e7436"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var m=window.MapManager.getMapModel().getLayerById("17015589-cab5-4133-b894-173323d58a06");m&&MapExpress.Utils.legendUtils.addLegendItemToLayer(m.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><circle fill="#ff7f00" stroke-width="1" cx="24" cy="24" r="24"></circle></svg>',templateType:"svg",minZoom:0,maxZoom:24});var w=window.MapManager.getMapModel().getLayerById("af449bd6-0552-4594-b1f2-5069793a7f8f");w&&MapExpress.Utils.legendUtils.addLegendItemToLayer(w.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#ff7f00"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var M=window.MapManager.getMapModel().getLayerById("399705e9-b9bb-47e9-a6c8-0afeb68f7fe1");M&&MapExpress.Utils.legendUtils.addLegendItemToLayer(M.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#9747ff"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var y=window.MapManager.getMapModel().getLayerById("7685921f-3695-4125-a469-6e503d2d2978");y&&MapExpress.Utils.legendUtils.addLegendItemToLayer(y.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#ff6011"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var h=window.MapManager.getMapModel().getLayerById("7685921f-3695-4125-a469-6e503d2d2978");h&&MapExpress.Utils.legendUtils.addLegendItemToLayer(h.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="12" x1="0" y1="24" x2="48" y2="24" stroke="#ff7f00"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24})},initListenersForImageLegend:function(){var n=this;window.MapManager.on("mapexspress:mapmanager:layer:visiblechanged",function(e){if("bf70062f-0cc1-4db7-8641-4e01bc657981"===e.layerId||"8e7d4a17-e726-4339-a4cd-116296cba17d"===e.layerId||"69eef35f-d2c0-4e3f-b8d0-8b33c702632c"===e.layerId){var a=$("#dtp_legend");a.length&&0<a.length||n.showImageLegend("dtp_legend","ДТП","images/dtp_legend.jpg")}if("b168643b-e189-4e4e-b59a-10ffd08d096f"===e.layerId){var t=$("#intens_legend");e.visible?t.length||n.showImageLegend("intens_legend","Уровень загрузки авт./час","images/intens_legend.jpg"):t.remove()}if("3a008804-e5ca-480b-8ca0-2e4a26e6f61f"===e.layerId){var o=$("#speedlimit_legend");e.visible?o.length||n.showImageLegend("speedlimit_legend","Ограничение скоростного режима","images/speedlimit_legend.jpg"):o.remove()}})},showImageLegend:function(e,a,t){var o=new MapExpress.Controls.MapControl(window.MapManager._map,{headerEnabled:!0,closeButtonEnabled:!0,position:"right",maxHeightMinus:.2,closeOnEsc:!1,destroyOnClose:!0,controlId:e});o.setTitle(a),o.setControlStyle({opacity:"0.9"}),o.setContentStyle({"overflow-y":"auto",padding:"0px"}),o.show(),o.setContentFromTemplate("templates/imageMapLegend.html","imageMapLegendId",{imgSrc:t})}};