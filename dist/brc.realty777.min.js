BaltrosPkk={Controls:{},Service:{},Geo:{},Layers:{},Utils:{Promise:{}},Mapping:{},Tools:{},Styles:{},Search:{},Edit:{}},window.BaltrosPkk=BaltrosPkk,BaltrosPkk.Mapping.MapInitializer={initialize:function(e){MapExpress.Mapping.MapInitializerHelper.initializeFromURL(e,"map_model777.json",function(){var e=window.MapManager,a=window.MapManager._map;MapExpress.Utils.CadastreUtils.replaceRosreestrIdentifyFunc(),a.addControl((o=window.MapManager,t=new MapExpress.Tools.MapToolbar(o,{position:"topleft"}),t.addCommand(new MapExpress.Tools.ShowLayerControlMapCommandExt(o)),t.addControlFromTemplate("templates/realtySearch.html","searchId"),t)),a.addControl(function(){var e=window.MapManager,a=new MapExpress.Tools.MapToolbar(e,{position:"topright",panelBodyId:"standart-toolbar-body",mapToolBarId:"standart-toolbar"});a.addCommand(new MapExpress.Tools.IdentifyMapCommand(e)),a.addCommand(new MapExpress.Tools.LineMeasureCommand(e)),a.addCommand(new MapExpress.Tools.SqrtMeasureCommand(e)),a.addCommand(new MapExpress.Tools.CoordinatesRunnerCommand(e)),a.addCommand(new MapExpress.Tools.MapExportCommand(e,{showProjList:!1})),a.addCommand(new MapExpress.Tools.SelectorBaseMapsCommand(e));var o=new MapExpress.Tools.ShowLegendCommand(e);return a.addCommand(o),o.activate(),a}()),a.addControl(function(){var e=new MapExpress.Controls.MapStatusbarControl(window.MapManager);e.addSection(new MapExpress.Controls.ZoomStandartStatusbarSection(window.MapManager)),e.addSection(new MapExpress.Controls.CoordinatesStandartStatusbarSection(window.MapManager)),e.addSection(new MapExpress.Controls.CurrentToolStatusbarSection(window.MapManager));var a=new MapExpress.Controls.AttibutionStandartStatusbarSection(window.MapManager);return a.options.attibution.push({href:"http://leafletjs.com",prefix:"Leaflet"}),a.options.attibution.push({href:"https://openstreetmap.org",prefix:"© OpenStreetMap"}),window.MapManager.mapStatusBar=e}()),L.control.zoom({position:"topleft"}).addTo(a),MapExpress.Tools.IdentifyMapCommand.maxHeightMinus=.35,MapExpress.Tools.IdentifyMapCommand.maxWidthMinus=.6,MapExpress.Tools.IdentifyMapCommand.showFloatWindow=!1,BaltrosPkk.Mapping.LegendManager.addRoadLegend(),BaltrosPkk.Mapping.LegendManager.initListenersForImageLegend(),e.refreshMap();var o,t}),MapExpress.Tools.ShowLayerControlMapCommandExt=MapExpress.Tools.ShowLayerControlMapCommand.extend({createContent:function(e){var a=MapExpress.Tools.ShowLayerControlMapCommand.prototype.createContent.call(this,e);MapExpress.Controls.MapControlUtils.setStyle(a,"float:left");var o=L.DomUtil.create("span","divider1",e);return MapExpress.Controls.MapControlUtils.setStyle(o,"float:left"),a}})}},BaltrosPkk.Mapping.LegendManager={addPkkParcelLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#ffffff" stroke-width="3" x="0" y="0" width="48" height="24" stroke-dasharray="none" stroke="#f28383" opacity="1" fill-opacity="1" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addPkkOksLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#ffbebe" stroke-width="3" x="0" y="0" width="48" height="24" stroke="#ffbebe"  opacity="1" fill-opacity="1" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addPkkZouitLegend:function(e){MapExpress.Utils.legendUtils.addLegendItemToLayer(e,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 24"><rect fill="#92d17b" stroke-width="3" x="0" y="0" width="48" height="24" stroke="#92d17b"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",maxZoom:24,minZoom:0})},addRoadLegend:function(){var e=window.MapManager.getMapModel().getLayerById("0edd6a13-a7ea-4992-9244-01dfcc96fb67");e&&MapExpress.Utils.legendUtils.addLegendItemToLayer(e.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/traffic_lights.png",imageDataFormat:"png"});var a=window.MapManager.getMapModel().getLayerById("f59439fa-34a4-4c17-9b69-1e0426643371");a&&MapExpress.Utils.legendUtils.addLegendItemToLayer(a.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/peshehod.png",imageDataFormat:"png"});var o=window.MapManager.getMapModel().getLayerById("13b3cdf1-b591-48bf-9b57-1717fc17997e");o&&MapExpress.Utils.legendUtils.addLegendItemToLayer(o.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/transport_stop.png",imageDataFormat:"png"});var t=window.MapManager.getMapModel().getLayerById("a740672b-5103-434a-8d12-f9ea317c3b5e");t&&MapExpress.Utils.legendUtils.addLegendItemToLayer(t.mapLayer,{minZoom:0,maxZoom:24,imageUrl:"images/camera.jpg",imageDataFormat:"jpeg"});var n=window.MapManager.getMapModel().getLayerById("965f6298-a8de-411c-8fff-5b9abdb929e0");n&&MapExpress.Utils.legendUtils.addLegendItemToLayer(n.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><rect fill="#a2bcd6" stroke-width="1" x="0" y="0" width="48" height="48" stroke="#a2bcd6"  opacity="1" fill-opacity="0.5" stroke-opacity="1"></rect></svg>',templateType:"svg",minZoom:0,maxZoom:24});var r=window.MapManager.getMapModel().getLayerById("55a62cba-226a-4061-9287-76c1f58e5a20");r&&MapExpress.Utils.legendUtils.addLegendItemToLayer(r.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="6" x1="0" y1="24" x2="48" y2="24" stroke="#2e4053"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24});var s=window.MapManager.getMapModel().getLayerById("7cfd41b6-d2a7-472f-8b32-6e4bc547252a");s&&MapExpress.Utils.legendUtils.addLegendItemToLayer(s.mapLayer,{legendTemplate:'<svg width="48" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><line stroke-width="6" x1="0" y1="24" x2="48" y2="24" stroke="#4f061b"></line></svg>',templateType:"svg",minZoom:0,maxZoom:24})},initListenersForImageLegend:function(){var t=this;window.MapManager.on("mapexspress:mapmanager:layer:visiblechanged",function(e){if("bf70062f-0cc1-4db7-8641-4e01bc657981"===e.layerId||"8e7d4a17-e726-4339-a4cd-116296cba17d"===e.layerId||"69eef35f-d2c0-4e3f-b8d0-8b33c702632c"===e.layerId){var a=$("#dtp_legend");a.length&&0<a.length||t.showImageLegend("dtp_legend","ДТП","images/dtp_legend.jpg");var o=window.MapManager.getMapModel().getLayerById("bf70062f-0cc1-4db7-8641-4e01bc657981");console.log(o.mapLayer.options.visible)}})},showImageLegend:function(e,a,o){var t=new MapExpress.Controls.MapControl(window.MapManager._map,{headerEnabled:!0,closeButtonEnabled:!0,position:"right",maxHeightMinus:.2,closeOnEsc:!1,destroyOnClose:!0,controlId:e});t.setTitle(a),t.setControlStyle({opacity:"0.9"}),t.setContentStyle({"overflow-y":"auto",padding:"0px"}),t.setContentFromTemplate("templates/imageMapLegend.html","imageMapLegendId",{imgSrc:o}),t.show()}};