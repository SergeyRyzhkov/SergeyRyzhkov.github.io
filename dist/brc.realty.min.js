function InitializeMap(a){MapExpress.Mapping.MapInitializerHelper.initializeFromURL(a,"map_model.json",onWorkspaceLoaded)}function onWorkspaceLoaded(){var a=(window.MapManager,window.MapManager._map);a.addControl(createSearchToolbar()),a.addControl(createStandartToolbar()),replaceRosreestrIdentifyFunc(),L.control.zoom({position:"topleft"}).addTo(a),L.control.scale().addTo(a,{imperial:!1})}function createSearchToolbar(){var a=window.MapManager,b=new MapExpress.Tools.MapToolbar(a,{position:"topleft"});return b.addCommand(new MapExpress.Tools.ShowLayerControlMapCommandExt(a)),b.addControlFromTemplate("./templates/realtySearch.html","searchId"),b}function createStandartToolbar(){var a=window.MapManager,b=new MapExpress.Tools.MapToolbar(a,{position:"topright"});return b.addCommand(new MapExpress.Tools.IdentifyMapCommand(a)),b.addCommand(new MapExpress.Tools.LineMeasureCommand(a)),b.addCommand(new MapExpress.Tools.SqrtMeasureCommand(a)),b.addCommand(new MapExpress.Tools.ActiveViewMapExportCommand(a)),b.addCommand(new MapExpress.Tools.SelectorBaseMapsCommand(a)),b}function replaceRosreestrIdentifyFunc(){function a(a,b,c,d,e){return null}function b(a,b,c,d,e){$.ajax({type:"post",url:"http://sergeyryzhkov.github.io/css/jstree.min.css",data:{name:"когда будете сами себя проврять?",time:"undefined"},success:function(){window.alert("Выполнено")},error:function(a,b,c){console.log(a),console.log(c),window.alert(b)}})}function c(a,b,c,d,e){return MapExpress.Utils.CadastreUtils.getObjectGeoJSONByLatLngAsyn(a,MapExpress.Utils.CadastreUtils.cadastreObjectType.OKS)}var d=window.MapManager.getMapModel().getLayersByOptionValue("displayName","Публичная кадастровая карта");if(d&&d.length>0){var e=[];window.MapManager.getMapModel()._fillAllLayers(d[0],e);for(var f=0;f<e.length;f++){var g=e[f];if(g.mapLayer&&g.mapLayer._dataPovider){if("Земельные участки"===g.options.displayName){g.mapLayer._dataPovider.getFeatureInfoAsync=b;continue}if("ОКС"===g.options.displayName){g.mapLayer._dataPovider.getFeatureInfoAsync=c;continue}g.mapLayer._dataPovider.getFeatureInfoAsync=a}}}}MapExpress.Tools.ShowLayerControlMapCommandExt=MapExpress.Tools.ShowLayerControlMapCommand.extend({createContent:function(a){var b=MapExpress.Tools.ShowLayerControlMapCommand.prototype.createContent.call(this,a);return L.DomUtil.create("span","divider1",a),b}});